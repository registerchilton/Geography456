<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>African-American Land Ownership</title>
</head>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js" integrity="sha512-dfX5uYVXzyU8+KHqj8bjo7UkOdg18PaOtpa48djpNbZHwExddghZ+ZmzWT06R5v6NSk3ZUfsH6FNEDepLx9hPQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
    const fileURL = "https://raw.githubusercontent.com/registerchilton/Geography456/main/Northside/NorthsideCentroidsWithChangeDates.csv"
    let myResult
    Papa.parse(fileURL, {
        download: true,
        header: true,
        complete: function(result) {
        myResult = result.data
        }
    })
</script>



<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>

<style>
    #myfirstmap { height: 500px; width: 500px}
</style>

<body>
    <h1>Changes in African-American Landownership in the Northside Neighborhood, Chapel Hill, NC</h1>
    <h2> by Mark Chilton, Orange County Register of Deeds, Febraury 2024</h2>
    <h3>Click a button below. Green is African-American ownership. Red is formerly African-American owned.</h3>

    <button onclick="e()">
		Af-Am ownership in 1970.
	</button>

    <button onclick="f()">
		Af-Am ownership in 1980.
	</button>

    <button onclick="g()">
		Af-Am ownership in 1990.
	</button>
    
    <button onclick="h()">
		Af-Am ownership in 2000.
	</button>

    <button onclick="j()">
		Af-Am ownership in 2010.
	</button>

    <button onclick="k()">
		Af-Am ownership in 2020.
	</button>

    <div id="myfirstmap"></div>
    <script>
        var mymap = L.map('myfirstmap').setView([35.91587645213845, -79.06359860746367], 16);
        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
}).addTo(mymap);

//Define some green and red marker icons:
var greenIcon = new L.Icon({
  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',
  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
  iconSize: [25, 41],
  iconAnchor: [12, 41],
  popupAnchor: [1, -34],
  shadowSize: [41, 41]
});

var redIcon = new L.Icon({
  iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
  iconSize: [25, 41],
  iconAnchor: [12, 41],
  popupAnchor: [1, -34],
  shadowSize: [41, 41]
});

    function e() {
            for (var i=0; i < myResult.length; i++){
                var pin = myResult[i].CurrentPIN
                var address = myResult[i].StreetAddressUnofficial
                var lat = myResult[i].Lat
                var long = myResult[i].Long
                var changeDate = myResult[i].ChangeDate
                console.log(status);
                if (changeDate >= 1970) {
                    var data27 = L.marker([lat, long], {icon: greenIcon}).addTo(mymap)
                    data27.bindPopup(address);
                    }
                    if (changeDate < 1970) {
                    var data27 = L.marker([lat, long], {icon: redIcon}).addTo(mymap)
                    data27.bindPopup(address);
                    }
                
	    	}//end loop
        }// end function

	function f() {
            for (var i=0; i < myResult.length; i++){
                var pin = myResult[i].CurrentPIN
                var address = myResult[i].StreetAddressUnofficial
                var lat = myResult[i].Lat
                var long = myResult[i].Long
                var changeDate = myResult[i].ChangeDate
                console.log(status);
                if (changeDate >= 1980) {
                    var data27 = L.marker([lat, long], {icon: greenIcon}).addTo(mymap)
                    data27.bindPopup(address);
                    }
                    if (changeDate < 1980) {
                    var data27 = L.marker([lat, long], {icon: redIcon}).addTo(mymap)
                    data27.bindPopup(address);
                    }
                
	    	}//end loop
        }// end function

        function g() {
            for (var i=0; i < myResult.length; i++){
                var pin = myResult[i].CurrentPIN
                var address = myResult[i].StreetAddressUnofficial
                var lat = myResult[i].Lat
                var long = myResult[i].Long
                var changeDate = myResult[i].ChangeDate
                console.log(status);
                if (changeDate >= 1990) {
                    var data27 = L.marker([lat, long], {icon: greenIcon}).addTo(mymap)
                    data27.bindPopup(address);
                    }
                    if (changeDate < 1990) {
                    var data27 = L.marker([lat, long], {icon: redIcon}).addTo(mymap)
                    data27.bindPopup(address);
                    }
                
	    	}//end loop
        }// end function

        function h() {
            for (var i=0; i < myResult.length; i++){
                var pin = myResult[i].CurrentPIN
                var address = myResult[i].StreetAddressUnofficial
                var lat = myResult[i].Lat
                var long = myResult[i].Long
                var changeDate = myResult[i].ChangeDate
                console.log(status);
                if (changeDate >= 2000) {
                    var data27 = L.marker([lat, long], {icon: greenIcon}).addTo(mymap)
                    data27.bindPopup(address);
                    }
                    if (changeDate < 2000) {
                    var data27 = L.marker([lat, long], {icon: redIcon}).addTo(mymap)
                    data27.bindPopup(address);
                    }
                
	    	}//end loop
        }// end function

        function j() {
            for (var i=0; i < myResult.length; i++){
                var pin = myResult[i].CurrentPIN
                var address = myResult[i].StreetAddressUnofficial
                var lat = myResult[i].Lat
                var long = myResult[i].Long
                var changeDate = myResult[i].ChangeDate
                console.log(status);
                if (changeDate >= 2010) {
                    var data27 = L.marker([lat, long], {icon: greenIcon}).addTo(mymap)
                    data27.bindPopup(address);
                    }
                    if (changeDate < 2010) {
                    var data27 = L.marker([lat, long], {icon: redIcon}).addTo(mymap)
                    data27.bindPopup(address);
                    }
                
	    	}//end loop
        }// end function

        function k() {
            for (var i=0; i < myResult.length; i++){
                var pin = myResult[i].CurrentPIN
                var address = myResult[i].StreetAddressUnofficial
                var lat = myResult[i].Lat
                var long = myResult[i].Long
                var changeDate = myResult[i].ChangeDate
                console.log(status);
                if (changeDate >= 2020) {
                    var data27 = L.marker([lat, long], {icon: greenIcon}).addTo(mymap)
                    data27.bindPopup(address);
                    }
                    if (changeDate < 2020) {
                    var data27 = L.marker([lat, long], {icon: redIcon}).addTo(mymap)
                    data27.bindPopup(address);
                    }
                
	    	}//end loop
        }// end function

</script>
 </body>

</html>
