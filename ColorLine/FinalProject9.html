<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapel Hill's 'Color Line'</title>
</head>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>

<script src="./chorus.js"></script>
<script src="./map1880.js"></script>
<script src="./northside.js"></script>
<script src="./tanyard.js"></script>

<style>
    #myfirstmap {height: 750px; width: 100pct}
    .slider{width: 500px;}
</style>

<body>
    <audio id="slide0">
        <source src="slide0.mp3" type="audio/mpeg">
    </audio>
    <audio id="slide1">
        <source src="slide1.mp3" type="audio/mpeg">
    </audio>
    <audio id="slide2">
        <source src="slide2.mp3" type="audio/mpeg">
    </audio>
    <audio id="slide3">
        <source src="slide3.mp3" type="audio/mpeg">
    </audio>
    <audio id="slide4">
        <source src="slide4.mp3" type="audio/mpeg">
    </audio>
    <audio id="slide5">
        <source src="slide5.mp3" type="audio/mpeg">
    </audio>
    <audio id="slide6">
        <source src="slide6.mp3" type="audio/mpeg">
    </audio>
    <audio id="slide7">
        <source src="slide7.mp3" type="audio/mpeg">
    </audio>
    <audio id="slide8">
        <source src="slide8.mp3" type="audio/mpeg">
    </audio>
    <audio id="slide9">
        <source src="slide9.mp3" type="audio/mpeg">
    </audio>
    <audio id="slide10">
        <source src="slide10.mp3" type="audio/mpeg">
    </audio>
    <!-- <audio id="slide11">
        <source src="slide11.mp3" type="audio/mpeg">
    </audio> -->
    <h1 id="yearheader">The History of Chapel Hill's 'Color Line'</h1>
    <h3 id="comment"></h3>

        <div class="slider-container">
            <input type="range" min="0" max="10" value="0" class="slider" id="year" oninput='yearChange()'>
            <div class="tick-container">
            </div>
        </div>
        <div class="slider-container" id="slider">
            <input type="range" min="1960" max="2024" value="1960" class="slider" id="sliderval" oninput='drawparcel()'>
              <div class="tick-container">
                  <span class="tick">1960</span>
                  <span class="tick">1965</span>
                  <span class="tick">1970</span>
                  <span class="tick">1975</span>
                  <span class="tick">1980</span>
                  <span class="tick">1985</span>
                  <span class="tick">1990</span>
                  <span class="tick">1995</span>
                  <span class="tick">2000</span>
                  <span class="tick">2005</span>
                  <span class="tick">2010</span>
                  <span class="tick">2015</span>
                  <span class="tick">2020</span>
                  <span class="tick">2024</span>
              </div>
            </div>
    <button id="button1" onclick="slide0()">Tell me the story</button>
    <button id="button2" onclick="Explore()">Explore on my own</button>
    <button id="button3" onclick="Mapof1850()">Show me the 1850 map</button>
    <button id="button4" onclick="Mapof1880()">Show me the 1880 map</button>
    <button id="button5" onclick="Mapof1960()">Show me the 1960-2024 map</button>
    <a href="https://registerchilton.github.io/Geography456/ColorLine/FinalProjectDemo.html"><button id="button6" onclick="showHow()">OMG! How did you make this?</button></a>
    
    <div id="myfirstmap"></div>
    <h5>Special thanks to Assistant Professor Javier Arce-Nazario of the UNC-CH Geography Department for teaching me how to use Leaflet and code javascript. Students at UNC may wish to take his Geovisualizing Change class (Geog 456), which is where I learned this.
        <br><br>
    Also special thanks to the staff of the North Carolina Collection at Wilson Library, UNC-Chapel Hill - without whom nothing!
        <br><br>
    Sources - <br>
    Carter, H. D. (with Julia Hooper Graves and Lucy Phillips Russell), Map of Chapel Hill as it was in 1875-1885, unpublished manuscript map at the Carolina Collection, Wilson Library, UNC, produced in 1934.<br>
    Chilton, Mark, A Chorus Silenced: The community of color at the University of North Carolina, July 1850, a map submitted for the GIS Day Map Competition, Fall 2023.<br>
    Freeman, Charles Maddry, Growth and plan for a community: a study of Negro life in Chapel Hill and Carrboro, North Carolina, Masters Thesis, UNC Department of Sociology, 1944.<br>
    [Map of Chapel Hill], 1852 with annotations by Professor Grady in 1880 & some other annotations thought to have been made by UNC President Kemp Plummer Battle, North Carolina Collection, Wilson Library, University of North Carolina at Chapel Hill.<br>
    Orange County Deed Books, office of the Orange County Register of Deeds, Hillsborough, North Carolina.<br>
    Plan of the Village of Chapel Hill on a scale of 200 yards to an Inch--Copy from a Plot in the Possession of William Pannill which was taken from the Plot of John Craig, Esq., circa 1817. A hand-drawn map at the University Archives, Wilson Library, UNC-Chapel Hill.<br>
    United States Census Bureau, the Orange County Manuscript Census of 1880, Washington, D.C., accessed via Ancestry.com.<br>

</h5>
</body>

<script>
    document.getElementById("year").style.display = "none";
    document.getElementById("slider").style.display = "none";
    document.getElementById("button3").style.display = "none";
    document.getElementById("button4").style.display = "none";
    document.getElementById("button5").style.display = "none";
    document.getElementById("button6").style.display = "none";
    var mymap = L.map('myfirstmap').setView([35.91359630123158,-79.05896902084352], 15);
    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(mymap);
    var tempLayer = L.layerGroup().addTo(mymap);
    var colorline = L.layerGroup().addTo(mymap);
    var markerLayer = L.layerGroup().addTo(mymap);
    var baseMap = L.layerGroup().addTo(mymap);
    var moveLayer = L.layerGroup().addTo(mymap);
    var hydroLayer = L.layerGroup().addTo(mymap);
    var counter = 1
    var year = 1
    var colorLine = [[35.90395302242906,-79.06149029731752],[35.90447199875475,-79.06154394149782],[35.90528888395202,-79.0616297721863],[35.905949338159466,-79.06182289123537],[35.90692262904967,-79.06180143356323],[35.907756868856104,-79.06150102615358],[35.90852158095237,-79.06071782112123],[35.90898214262625,-79.06050324440004],[35.909381873226735,-79.06041741371155],[35.910528915042455,-79.06049251556398],[35.911806282948326,-79.06066417694093],[35.91284032757661,-79.06069636344911],[35.91320528127748,-79.06050324440004],[35.913492029432774,-79.06006336212158],[35.913926494354385,-79.05974149703981],[35.91437833534177,-79.0596127510071],[35.91493444378348,-79.05959129333498],[35.91536021166686,-79.0597951412201],[35.91577728818787,-79.05969858169556],[35.91614222833987,-79.05926942825319],[35.91665487951925,-79.05895829200746],[35.91698505987574,-79.05859351158144],[35.917323927755895,-79.05777812004091],[35.91769754963337,-79.05730605125429],[35.9180885473828,-79.05699491500856],[35.91855774213086,-79.05683398246767],[35.91951350060105,-79.0564262866974],[35.9201912132454,-79.05611515045167],[35.92193759983511,-79.05614733695985],[35.923484118947414,-79.05610442161561],[35.92470046104681,-79.0560829639435]]
    var comment1944 = "In 1944, Charles Freeman's Masters Thesis (UNC Sociology) included a map of Chapel Hill with the town's informal but very real segregation boundary marked on it. The location of this line was still evident when I arrived here as an undergraduate 44 years later; and vestiges of it survive to this day. But Chapel Hill was not always segregated in just this way..."
    var comment1850 = "In 1850, Chapel Hill was a tiny village and the UNC campus had just a handful of buildings. Most of the people of color in the village were enslaved (shown in red), but a significant number were free people of color (in green). While enslaved people had no choice about where they lived, free people of color had more say in their circumstances."
    var comment1860 = "Over the course of the 1850's, Chapel Hill began expanding to the westward along Cameron Avenue. The area that is now West Franklin Street, however was the site of McDade's leather tanning yard - an unappealing land use."
    var comment1870 = "But P H McDade's tanning yard was not merely polluting West Franklin Street; the mixture of blood, urine, animal brains and tannic acid used to create the leather were draining down Tanyard Branch - creating a whole watershed of unappealing land on the north side of what would become West Rosemary Street."
    var comment1873 = "Notwithstanding the foul nature of Tanyard Branch, a formerly enslaved man named Wilson Caldwell managed to save up enough money during eight years of freedom to buy ten acres about a mile west of Tanyard Branch, becoming the first landowner of color in what would become Chapel Hill's Northside Neighborhood."
    var comment1880 = "Fifty years after the fact, some white senior citizens produced this map of Chapel Hill as they remembered it in their youth in 1880's. While it puts a very white filter on things, it does include six households of color (though the 1880 census shows that there were 60)."
    var comment1882 = "We can actually see the census taker's route on 25 Jun 1880. He visited Bella Hutchins, David McCauley, Seaton Barbee, Algernon Barbee and Sidney Barbee. But somewhere along this route he also stopped at the home of Emily Tailor, a woman of color who was not shown on the 1880 map."
    var comment1883 = "Regardless of where exactly Emily Tailor lived, we do know where six households of color were. Interesting to note that there were still vestiges of the 1850 neighborhood of color on East Franklin Street. And that five of the six households of color shown were east of Chapel Hill's 'color line' - showing that it still did not exist in 1880."
    var comment1885 = "Unfortunately many of the earliest deeds for land in Northside were never recorded, so it is difficult to determine exactly when landownership by people of color began for many parcels - and even harder to know who was renting where. But early 20th century deeds just south of Wilson Caldwell's land often mention 'Young Evans old line' indicating that his land was there."
    var comment1886 = "Nearby was the home of William L Saunders - the Grand Dragon of the NC Ku Klux Klan, the man for whom the Geography Building at UNC would soon be named. Before arriving at the Saunders house, and after leaving Young Evans place, the census taker visited five other households of color. Precisely where they were I cannot say, but we have a good idea approximately."
    var comment1900 = "By the dawn of the 20th century, the Jim Crow system had been established across the South. Voters of color were disenfranchised, and people of color who wanted to buy a home were only extended credit to buy land in certain areas. Northside was taking shape."
    var comment1920 = "1920"
    var comment1940 = "1940"
    var comment1960 = "1960"
    var imageBounds1850 = [[35.89168040667976,-79.07330979026091],[35.928918506679764,-79.01788779026091]]
    var imageBounds1860 = [[35.89431385933255,-79.07269619324983],[35.92471065933255,-79.02245259324982]]
    var opacity1850 = 0
    var opacity1860 = 0
    var imageUrl1850 = "./ChapelHill1850.png"
    var imageUrl1860 = "./CH1860.png"
    var tanyardProjection = []
    var toggle = 0
    var loopcounter = 0
    var x = document.getElementById("test"); 
    var soundOff = "false"
    var orbitalpath = [[35.9140774593442,-79.0517727014895],[35.9141237977387,-79.0517788020548],[35.9141694281025,-79.0517889180627],[35.9142140031607,-79.0518029725242],[35.9142571836704,-79.0518208584765],[35.9142986410019,-79.0518424397967],[35.9143380596397,-79.0518675522378],[35.9143751395844,-79.0518960046790],[35.9144095986351,-79.0519275805802],[35.9144411745377,-79.0519620396296],[35.9144696269804,-79.0519991195730],[35.9144947394232,-79.0520385382098],[35.9145163207451,-79.0520799955404],[35.9145342066991,-79.0521231760493],[35.9145482611626,-79.0521677511070],[35.9145583771724,-79.0522133814703],[35.9145644777396,-79.0522597198646],[35.9145665164353,-79.0523064136268],[35.9145644777437,-79.0523531073892],[35.9145583771806,-79.0523994457841],[35.9145482611748,-79.0524450761482],[35.9145342067153,-79.0524896512072],[35.9145163207651,-79.0525328317177],[35.9144947394469,-79.0525742890502],[35.9144696270076,-79.0526137076892],[35.9144411745681,-79.0526507876352],[35.9144095986686,-79.0526852466873],[35.9143751396207,-79.0527168225915],[35.9143380596785,-79.0527452750361],[35.9142986410429,-79.0527703874807],[35.9142571837134,-79.0527919688045],[35.9142140032052,-79.0528098547606],[35.9141694281482,-79.0528239092261],[35.9141237977854,-79.0528340252380],[35.9140774593914,-79.0528401258074],[35.9140307656292,-79.0528421645053],[35.9139840718668,-79.0528401258159],[35.9139377334716,-79.0528340252549],[35.9138921031070,-79.0528239092513],[35.9138475280474,-79.0528098547939],[35.9138043475360,-79.0527919688457],[35.9137628902026,-79.0527703875294],[35.9137234715623,-79.0527452750920],[35.9136863916150,-79.0527168226542],[35.9136519325614,-79.0526852467563],[35.9136203566556,-79.0526507877099],[35.9135919042093,-79.0526137077691],[35.9135667917629,-79.0525742891346],[35.9135452104371,-79.0525328318061],[35.9135273244790,-79.0524896512988],[35.9135132700114,-79.0524450762424],[35.9135031539973,-79.0523994458801],[35.9134970534258,-79.0523531074863],[35.9134950147257,-79.0523064137243],[35.9134970534129,-79.0522597199617],[35.9135031539717,-79.0522133815663],[35.9135132699732,-79.0521677512012],[35.9135273244285,-79.0521231761410],[35.9135452103747,-79.0520799956287],[35.9135667916891,-79.0520385382943],[35.9135919041246,-79.0519991196529],[35.9136203565607,-79.0519620397042],[35.9136519324570,-79.0519275806491],[35.9136863915019,-79.0518960047417],[35.9137234714414,-79.0518675522937],[35.9137628900747,-79.0518424398454],[35.9138043474022,-79.0518208585177],[35.9138475279087,-79.0518029725576],[35.9138921029644,-79.0517889180879],[35.9139377333262,-79.0517788020717],[35.9139840717197,-79.0517727014980],[35.9140307654816,-79.0517706627957],[35.9140774593442,-79.0517727014895],[35.9141237977387,-79.0517788020548],[35.9141694281025,-79.0517889180627],[35.9142140031607,-79.0518029725242],[35.9142571836704,-79.0518208584765],[35.9142986410019,-79.0518424397967],[35.9143380596397,-79.0518675522378],[35.9143751395844,-79.0518960046790],[35.9144095986351,-79.0519275805802],[35.9144411745377,-79.0519620396296],[35.9144696269804,-79.0519991195730],[35.9144947394232,-79.0520385382098],[35.9145163207451,-79.0520799955404],[35.9145342066991,-79.0521231760493],[35.9145482611626,-79.0521677511070],[35.9145583771724,-79.0522133814703],[35.9145644777396,-79.0522597198646],[35.9145665164353,-79.0523064136268],[35.9145644777437,-79.0523531073892],[35.9145583771806,-79.0523994457841],[35.9145482611748,-79.0524450761482],[35.9145342067153,-79.0524896512072],[35.9145163207651,-79.0525328317177],[35.9144947394469,-79.0525742890502],[35.9144696270076,-79.0526137076892],[35.9144411745681,-79.0526507876352],[35.9144095986686,-79.0526852466873],[35.9143751396207,-79.0527168225915],[35.9143380596785,-79.0527452750361],[35.9142986410429,-79.0527703874807],[35.9142571837134,-79.0527919688045],[35.9142140032052,-79.0528098547606],[35.9141694281482,-79.0528239092261],[35.9141237977854,-79.0528340252380],[35.9140774593914,-79.0528401258074],[35.9140307656292,-79.0528421645053],[35.9139840718668,-79.0528401258159],[35.9139377334716,-79.0528340252549],[35.9138921031070,-79.0528239092513],[35.9138475280474,-79.0528098547939],[35.9138043475360,-79.0527919688457],[35.9137628902026,-79.0527703875294],[35.9137234715623,-79.0527452750920],[35.9136863916150,-79.0527168226542],[35.9136519325614,-79.0526852467563],[35.9136203566556,-79.0526507877099],[35.9135919042093,-79.0526137077691],[35.9135667917629,-79.0525742891346],[35.9135452104371,-79.0525328318061],[35.9135273244790,-79.0524896512988],[35.9135132700114,-79.0524450762424],[35.9135031539973,-79.0523994458801],[35.9134970534258,-79.0523531074863],[35.9134950147257,-79.0523064137243],[35.9134970534129,-79.0522597199617],[35.9135031539717,-79.0522133815663],[35.9135132699732,-79.0521677512012],[35.9135273244285,-79.0521231761410],[35.9135452103747,-79.0520799956287],[35.9135667916891,-79.0520385382943],[35.9135919041246,-79.0519991196529],[35.9136203565607,-79.0519620397042],[35.9136519324570,-79.0519275806491],[35.9136863915019,-79.0518960047417],[35.9137234714414,-79.0518675522937],[35.9137628900747,-79.0518424398454],[35.9138043474022,-79.0518208585177],[35.9138475279087,-79.0518029725576],[35.9138921029644,-79.0517889180879],[35.9139377333262,-79.0517788020717],[35.9139840717197,-79.0517727014980],[35.9140307654816,-79.0517706627957],[35.9140774593442,-79.0517727014895],[35.9141237977387,-79.0517788020548],[35.9141694281025,-79.0517889180627],[35.9142140031607,-79.0518029725242],[35.9142571836704,-79.0518208584765],[35.9142986410019,-79.0518424397967],[35.9143380596397,-79.0518675522378],[35.9143751395844,-79.0518960046790],[35.9144095986351,-79.0519275805802],[35.9144411745377,-79.0519620396296],[35.9144696269804,-79.0519991195730],[35.9144947394232,-79.0520385382098],[35.9145163207451,-79.0520799955404],[35.9145342066991,-79.0521231760493],[35.9145482611626,-79.0521677511070],[35.9145583771724,-79.0522133814703],[35.9145644777396,-79.0522597198646],[35.9145665164353,-79.0523064136268],[35.9145644777437,-79.0523531073892],[35.9145583771806,-79.0523994457841],[35.9145482611748,-79.0524450761482],[35.9145342067153,-79.0524896512072],[35.9145163207651,-79.0525328317177],[35.9144947394469,-79.0525742890502],[35.9144696270076,-79.0526137076892],[35.9144411745681,-79.0526507876352],[35.9144095986686,-79.0526852466873],[35.9143751396207,-79.0527168225915],[35.9143380596785,-79.0527452750361],[35.9142986410429,-79.0527703874807],[35.9142571837134,-79.0527919688045],[35.9142140032052,-79.0528098547606],[35.9141694281482,-79.0528239092261],[35.9141237977854,-79.0528340252380],[35.9140774593914,-79.0528401258074],[35.9140307656292,-79.0528421645053],[35.9139840718668,-79.0528401258159],[35.9139377334716,-79.0528340252549],[35.9138921031070,-79.0528239092513],[35.9138475280474,-79.0528098547939],[35.9138043475360,-79.0527919688457],[35.9137628902026,-79.0527703875294],[35.9137234715623,-79.0527452750920],[35.9136863916150,-79.0527168226542],[35.9136519325614,-79.0526852467563],[35.9136203566556,-79.0526507877099],[35.9135919042093,-79.0526137077691],[35.9135667917629,-79.0525742891346],[35.9135452104371,-79.0525328318061],[35.9135273244790,-79.0524896512988],[35.9135132700114,-79.0524450762424],[35.9135031539973,-79.0523994458801],[35.9134970534258,-79.0523531074863],[35.9134950147257,-79.0523064137243],[35.9134970534129,-79.0522597199617],[35.9135031539717,-79.0522133815663],[35.9135132699732,-79.0521677512012],[35.9135273244285,-79.0521231761410],[35.9135452103747,-79.0520799956287],[35.9135667916891,-79.0520385382943],[35.9135919041246,-79.0519991196529],[35.9136203565607,-79.0519620397042],[35.9136519324570,-79.0519275806491],[35.9136863915019,-79.0518960047417],[35.9137234714414,-79.0518675522937],[35.9137628900747,-79.0518424398454],[35.9138043474022,-79.0518208585177],[35.9138475279087,-79.0518029725576],[35.9138921029644,-79.0517889180879],[35.9139377333262,-79.0517788020717],[35.9139840717197,-79.0517727014980],[35.9140307654816,-79.0517706627957]]

    L.imageOverlay(imageUrl1850, imageBounds1850, {opacity: opacity1850}).addTo(baseMap);
    L.imageOverlay(imageUrl1860, imageBounds1860, {opacity: opacity1860}).addTo(baseMap);
    mymap.on('click', affix);

function affix(e){
    toggle = toggle + 1
    var mouseLat = e.latlng['lat'] 
    var mouseLong = e.latlng['lng']
    console.log(mouseLat,mouseLong)
}

function intro(){
    document.getElementById('comment').innerText = comment1944
    document.getElementById('yearheader').innerText = ""
    baseMap.clearLayers();
    markerLayer.clearLayers();
    hydroLayer.clearLayers();
    mymap.panTo([35.91359630123158,-79.05896902084352]);
    mymap.flyTo([35.91359630123158,-79.05896902084352], 15);
    L.imageOverlay("./Freeman2.png", [[35.90257394310867,-79.07430087090853],[35.92609154310867,-79.04332797090854]], {opacity: 1}).addTo(baseMap);
}

function Map1850() {
    baseMap.clearLayers();
    L.imageOverlay(imageUrl1850, imageBounds1850, {opacity: 1}).addTo(baseMap);
    markerLayer.clearLayers();
        for (i=0; i < chorus.features.length-1; i = i + 1) {
            coords = chorus.features[i].coords.split(",")
            toolTip = chorus.features[i].person
            if (chorus.features[i].status == "FPOC") {
                var green = L.circle(coords, {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 8}).addTo(markerLayer)
                .bindTooltip(toolTip);
            }
            if (chorus.features[i].status == "enslaved") {
                var red = L.circle(coords, {color: 'red', fillColor: 'red', fillOpacity: 1.0, radius: 8}).addTo(markerLayer)
                .bindTooltip(toolTip);
            }
            if (chorus.features[i].status == "white") {
                var red = L.circle(coords, {color: 'yellow', fillColor: 'yellow', fillOpacity: 1.0, radius: 8}).addTo(markerLayer)
                .bindTooltip(toolTip);
            }
    }
}

function yearChange(){
    year = document.getElementById('year').value
    console.log(year)
    if (year == 0) {
        intro()
        setTimeout(function(){var line = L.polyline(colorLine, {color:'green', weight: 5}).addTo(colorline)},10000);
        setTimeout(function(){colorline.clearLayers();},10250);
        setTimeout(function(){var line = L.polyline(colorLine, {color:'green', weight: 5}).addTo(colorline)},10500);
        setTimeout(function(){colorline.clearLayers();},10750);
        setTimeout(function(){var line = L.polyline(colorLine, {color:'green', weight: 5}).addTo(colorline)},11000);
        setTimeout(function(){colorline.clearLayers();},11250);
        setTimeout(function(){var line = L.polyline(colorLine, {color:'green', weight: 5}).addTo(colorline)},11500);
    }
    if (year == 1) {
        colorline.clearLayers();
        mymap.panTo([35.912780,-79.050630]);
        mymap.flyTo([35.912780,-79.050630], 16);
        document.getElementById('comment').innerText = comment1850
        L.imageOverlay(imageUrl1850, imageBounds1850, {opacity: 0.1}).addTo(baseMap);
        setTimeout(function(){L.imageOverlay(imageUrl1850, imageBounds1850, {opacity: 0.1}).addTo(baseMap);}, 50);
        setTimeout(function(){L.imageOverlay(imageUrl1850, imageBounds1850, {opacity: 0.1}).addTo(baseMap);}, 100);
        setTimeout(function(){L.imageOverlay(imageUrl1850, imageBounds1850, {opacity: 0.1}).addTo(baseMap);}, 150);
        setTimeout(function(){L.imageOverlay(imageUrl1850, imageBounds1850, {opacity: 0.1}).addTo(baseMap);}, 200);
        setTimeout(function(){L.imageOverlay(imageUrl1850, imageBounds1850, {opacity: 0.1}).addTo(baseMap);}, 250);
        setTimeout(function(){L.imageOverlay(imageUrl1850, imageBounds1850, {opacity: 0.1}).addTo(baseMap);}, 300);
        setTimeout(function(){L.imageOverlay(imageUrl1850, imageBounds1850, {opacity: 0.1}).addTo(baseMap);}, 350);
        setTimeout(function(){L.imageOverlay(imageUrl1850, imageBounds1850, {opacity: 0.1}).addTo(baseMap);}, 400);
        setTimeout(function(){L.imageOverlay(imageUrl1850, imageBounds1850, {opacity: 0.1}).addTo(baseMap);}, 450);
        setTimeout(function(){L.imageOverlay(imageUrl1850, imageBounds1850, {opacity: 0.1}).addTo(baseMap);}, 500);
        setTimeout(function(){baseMap.clearLayers();L.imageOverlay(imageUrl1850, imageBounds1850, {opacity: 1}).addTo(baseMap);}, 550);
        Map1850();
    }

    if (year == 2) {
        markerLayer.clearLayers()
        mymap.panTo([35.911508, -79.055339]);
        mymap.flyTo([35.911508, -79.055339], 15);
        document.getElementById('comment').innerText = comment1860
        L.imageOverlay(imageUrl1860, imageBounds1860, {opacity: 0.1}).addTo(baseMap);
        var PHMpopup = "<a href='https://rod.orangecountync.gov/orangencnw/application.asp?cmd=image_link&image_link_book=32&image_link_page=378&image_link_booktype=Records%20Book&tif2pdf=true'>Orange Deed Book 32, page 378 Elisha Mitchell to Patterson H McDade, 22 Feb 1847</a>"
        hydrology()
        setTimeout(function(){L.imageOverlay(imageUrl1860, imageBounds1860, {opacity: 0.1}).addTo(baseMap);}, 25);
        setTimeout(function(){L.imageOverlay(imageUrl1860, imageBounds1860, {opacity: 0.1}).addTo(baseMap);}, 50);
        setTimeout(function(){L.imageOverlay(imageUrl1860, imageBounds1860, {opacity: 0.1}).addTo(baseMap);}, 75);
        setTimeout(function(){L.imageOverlay(imageUrl1860, imageBounds1860, {opacity: 0.1}).addTo(baseMap);}, 100);
        setTimeout(function(){L.imageOverlay(imageUrl1860, imageBounds1860, {opacity: 0.1}).addTo(baseMap);}, 125);
        setTimeout(function(){L.imageOverlay(imageUrl1860, imageBounds1860, {opacity: 0.1}).addTo(baseMap);}, 150);
        setTimeout(function(){L.imageOverlay(imageUrl1860, imageBounds1860, {opacity: 0.1}).addTo(baseMap);}, 175);
        setTimeout(function(){L.imageOverlay(imageUrl1860, imageBounds1860, {opacity: 0.1}).addTo(baseMap);}, 200);
        setTimeout(function(){L.imageOverlay(imageUrl1860, imageBounds1860, {opacity: 0.1}).addTo(baseMap);}, 225);
        setTimeout(function(){L.imageOverlay(imageUrl1860, imageBounds1860, {opacity: 0.1}).addTo(baseMap);}, 250);
        setTimeout(function(){baseMap.clearLayers();L.imageOverlay(imageUrl1860, imageBounds1860, {opacity: 1}).addTo(baseMap);}, 275);
        setTimeout(function(){var polyg = L.polygon(tanyard, {color: 'yellow', fillColor: 'yellow', fillOpacity: 0.5}).addTo(markerLayer).bindPopup(PHMpopup).openPopup();}, 280)
    }
    if (year == 3) {
        console.log("Begin year 3")
        markerLayer.clearLayers()
        mymap.panTo([35.9122581360450,-79.0609860420227])
        mymap.setView([35.9122581360450,-79.0609860420227], 17);
        document.getElementById('comment').innerText = comment1870
        var polyg = L.polygon(tanyard, {color: 'red', fillColor: 'red', fillOpacity: 0.5}).addTo(markerLayer).bindPopup(PHMpopup)
//        L.imageOverlay("./slaughter.png", [[35.91189833051305,-79.06080771735792],[35.913946530513044,-79.05797551735792]]).addTo(markerLayer);
        var bloodpath = [[35.9122581360450,-79.0608560420227],[35.9122619376814,-79.0608836130381],[35.9122657393177,-79.0609111840535],[35.9122695409540,-79.0609387550688],[35.9122733425904,-79.0609663260842],[35.9122771442267,-79.0609938970996],[35.9122809458631,-79.0610214681149],[35.9122847474994,-79.0610490391303],[35.9122885491357,-79.0610766101456],[35.9122923507720,-79.0611041811609],[35.9122961524084,-79.0611317521763],[35.9122999540448,-79.0611593231916],[35.9123037556811,-79.0611868942070],[35.9123075573174,-79.0612144652223],[35.9123113589538,-79.0612420362377],[35.9123151605901,-79.0612696072531],[35.9123189622264,-79.0612971782684],[35.9123197768623,-79.0613058954477],[35.9123205914983,-79.0613146126270],[35.9123214061342,-79.0613233298063],[35.9123222207701,-79.0613320469856],[35.9123230354060,-79.0613407641649],[35.9123238500419,-79.0613494813442],[35.9123246646778,-79.0613581985235],[35.9123254793137,-79.0613669157028],[35.9123262939496,-79.0613756328821],[35.9123271085856,-79.0613843500614],[35.9123279232215,-79.0613930672407],[35.9123287378574,-79.0614017844200],[35.9123295524933,-79.0614105015993],[35.9123303671292,-79.0614192187786],[35.9123311817651,-79.0614279359579],[35.9123319964010,-79.0614366531372],[35.9123328110369,-79.0614453703165],[35.9123336256729,-79.0614540874958],[35.9123344403088,-79.0614628046751],[35.9123352549447,-79.0614715218544],[35.9123360695806,-79.0614802390337],[35.9123368842165,-79.0614889562130],[35.9123376988524,-79.0614976733923],[35.9123385134883,-79.0615063905716],[35.9123393281242,-79.0615151077509],[35.9123401427601,-79.0615238249302],[35.9123409573960,-79.0615325421095],[35.9123417720319,-79.0615412592888],[35.9123425866678,-79.0615499764681],[35.9123434013037,-79.0615586936474],[35.9123442159396,-79.0615674108267],[35.9123450305755,-79.0615761280060],[35.9123469313916,-79.0615821629763],[35.9123488322077,-79.0615881979465],[35.9123507330238,-79.0615942329168],[35.9123526338399,-79.0616002678871],[35.9123545346559,-79.0616063028574],[35.9123564354720,-79.0616123378277],[35.9123583362881,-79.0616183727980],[35.9123602371042,-79.0616244077682],[35.9123621379203,-79.0616304427385],[35.9123640387364,-79.0616364777088],[35.9123659395525,-79.0616425126791],[35.9123678403685,-79.0616485476494],[35.9123697411846,-79.0616545826197],[35.9123716420007,-79.0616606175900],[35.9123735428168,-79.0616666525602],[35.9123754436328,-79.0616726875305],[35.9123773444488,-79.0616787225008],[35.9123792452649,-79.0616847574711],[35.9123811460810,-79.0616907924414],[35.9123830468971,-79.0616968274117],[35.9123849477132,-79.0617028623819],[35.9123868485293,-79.0617088973522],[35.9123887493454,-79.0617149323225],[35.9123906501614,-79.0617209672928],[35.9123925509775,-79.0617270022631],[35.9123944517935,-79.0617330372334],[35.9123963526096,-79.0617390722037],[35.9123982534257,-79.0617451071739],[35.9124001542418,-79.0617511421442],[35.9124020550579,-79.0617571771145],[35.9124039558740,-79.0617632120847],[35.9124058566900,-79.0617692470550],[35.9124115591295,-79.0617732703685],[35.9124172615689,-79.0617772936820],[35.9124229640084,-79.0617813169955],[35.9124286664479,-79.0617853403091],[35.9124343688873,-79.0617893636227],[35.9124400713268,-79.0617933869362],[35.9124457737663,-79.0617974102497],[35.9124514762057,-79.0618014335632],[35.9124571786452,-79.0618054568767],[35.9124628810847,-79.0618094801902],[35.9124685835241,-79.0618135035037],[35.9124742859636,-79.0618175268173],[35.9124799884030,-79.0618215501308],[35.9124856908425,-79.0618255734443],[35.9124913932820,-79.0618295967578],[35.9124970957215,-79.0618336200714],[35.9125027981610,-79.0618376433849],[35.9125085006005,-79.0618416666984],[35.9125142030399,-79.0618456900119],[35.9125199054794,-79.0618497133254],[35.9125256079189,-79.0618537366390],[35.9125313103583,-79.0618577599525],[35.9125370127978,-79.0618617832660],[35.9125427152373,-79.0618658065795],[35.9125484176768,-79.0618698298930],[35.9125541201163,-79.0618738532065],[35.9125598225557,-79.0618778765200],[35.9125655249952,-79.0618818998336],[35.9125712274347,-79.0618859231471],[35.9125769298741,-79.0618899464606],[35.9125826323136,-79.0618939697741],[35.9125883347530,-79.0618979930877],[35.9125951233543,-79.0619040280580],[35.9126019119555,-79.0619100630283],[35.9126087005568,-79.0619160979985],[35.9126154891581,-79.0619221329688],[35.9126222777594,-79.0619281679391],[35.9126290663606,-79.0619342029094],[35.9126358549618,-79.0619402378797],[35.9126426435631,-79.0619462728500],[35.9126494321644,-79.0619523078202],[35.9126562207656,-79.0619583427905],[35.9126630093669,-79.0619643777608],[35.9126697979681,-79.0619704127311],[35.9126765865694,-79.0619764477014],[35.9126833751707,-79.0619824826717],[35.9126901637720,-79.0619885176420],[35.9126969523732,-79.0619945526122],[35.9127037409745,-79.0620005875825],[35.9127105295757,-79.0620066225528],[35.9127173181770,-79.0620126575231],[35.9127241067783,-79.0620186924934],[35.9127308953796,-79.0620247274637],[35.9127376839808,-79.0620307624339],[35.9127444725820,-79.0620367974042],[35.9127512611833,-79.0620428323745],[35.9127580497845,-79.0620488673448],[35.9127648383858,-79.0620549023151],[35.9127716269871,-79.0620609372853],[35.9127784155883,-79.0620669722556],[35.9127852041896,-79.0620730072259],[35.9127919927909,-79.0620790421962],[35.9127987813922,-79.0620850771665],[35.9128055699934,-79.0620911121368],[35.9128112724041,-79.0620958060026],[35.9128169748148,-79.0621004998684],[35.9128226772254,-79.0621051937341],[35.9128283796361,-79.0621098875999],[35.9128340820467,-79.0621145814657],[35.9128397844574,-79.0621192753315],[35.9128454868681,-79.0621239691972],[35.9128511892787,-79.0621286630630],[35.9128568916893,-79.0621333569288],[35.9128625941000,-79.0621380507945],[35.9128682965107,-79.0621427446603],[35.9128739989213,-79.0621474385261],[35.9128797013319,-79.0621521323918],[35.9128854037426,-79.0621568262576],[35.9128911061533,-79.0621615201234],[35.9128968085639,-79.0621662139892],[35.9129025109746,-79.0621709078550],[35.9129082133853,-79.0621756017208],[35.9129139157960,-79.0621802955866],[35.9129196182066,-79.0621849894523],[35.9129253206172,-79.0621896833181],[35.9129310230279,-79.0621943771839],[35.9129367254386,-79.0621990710496],[35.9129424278492,-79.0622037649154],[35.9129481302598,-79.0622084587812],[35.9129538326705,-79.0622131526469],[35.9129595350811,-79.0622178465127],[35.9129652374918,-79.0622225403785],[35.9129709399025,-79.0622272342443],[35.9129766423131,-79.0622319281101],[35.9129823447238,-79.0622366219758],[35.9129880471345,-79.0622413158416],[35.9129942926168,-79.0622439980506],[35.9130005380991,-79.0622466802596],[35.9130067835814,-79.0622493624687],[35.9130130290637,-79.0622520446777],[35.9130192745460,-79.0622547268867],[35.9130255200283,-79.0622574090957],[35.9130317655106,-79.0622600913048],[35.9130380109929,-79.0622627735138],[35.9130442564752,-79.0622654557228],[35.9130505019575,-79.0622681379319],[35.9130567474398,-79.0622708201409],[35.9130629929221,-79.0622735023499],[35.9130692384044,-79.0622761845589],[35.9130754838867,-79.0622788667679],[35.9130817293690,-79.0622815489769],[35.9130879748513,-79.0622842311859],[35.9130942203336,-79.0622869133949],[35.9131004658159,-79.0622895956039],[35.9131067112982,-79.0622922778129],[35.9131129567805,-79.0622949600219],[35.9131192022628,-79.0622976422309],[35.9131254477451,-79.0623003244399],[35.9131316932274,-79.0623030066490],[35.9131379387097,-79.0623056888580],[35.9131441841920,-79.0623083710670],[35.9131504296743,-79.0623110532760],[35.9131566751566,-79.0623137354850],[35.9131629206389,-79.0623164176940],[35.9131691661212,-79.0623190999030],[35.9131754116034,-79.0623217821121],[35.9131816570857,-79.0623244643211],[35.9131879025680,-79.0623271465301],[35.9131936049511,-79.0623288229107],[35.9131993073342,-79.0623304992913],[35.9132050097173,-79.0623321756720],[35.9132107121004,-79.0623338520526],[35.9132164144835,-79.0623355284332],[35.9132221168666,-79.0623372048138],[35.9132278192497,-79.0623388811944],[35.9132335216328,-79.0623405575751],[35.9132392240159,-79.0623422339557],[35.9132449263990,-79.0623439103364],[35.9132506287821,-79.0623455867170],[35.9132563311652,-79.0623472630976],[35.9132620335483,-79.0623489394783],[35.9132677359314,-79.0623506158589],[35.9132734383145,-79.0623522922396],[35.9132791406976,-79.0623539686202],[35.9132848430807,-79.0623556450008],[35.9132905454638,-79.0623573213815],[35.9132962478469,-79.0623589977621],[35.9133019502300,-79.0623606741428],[35.9133076526130,-79.0623623505234],[35.9133133549961,-79.0623640269040],[35.9133190573792,-79.0623657032847],[35.9133247597623,-79.0623673796653],[35.9133304621454,-79.0623690560460],[35.9133361645285,-79.0623707324266],[35.9133418669116,-79.0623724088072],[35.9133475692947,-79.0623740851879],[35.9133532716778,-79.0623757615685],[35.9133589740609,-79.0623774379492],[35.9133646764440,-79.0623791143298],[35.9133703788271,-79.0623807907104],[35.9133758096560,-79.0623841434717],[35.9133812404848,-79.0623874962330],[35.9133866713136,-79.0623908489943],[35.9133921021424,-79.0623942017555],[35.9133975329713,-79.0623975545167],[35.9134029638001,-79.0624009072780],[35.9134083946289,-79.0624042600393],[35.9134138254577,-79.0624076128006],[35.9134192562866,-79.0624109655619],[35.9134246871154,-79.0624143183231],[35.9134301179442,-79.0624176710843],[35.9134355487730,-79.0624210238456],[35.9134409796018,-79.0624243766069],[35.9134464104306,-79.0624277293682],[35.9134518412594,-79.0624310821295],[35.9134572720882,-79.0624344348907],[35.9134627029171,-79.0624377876520],[35.9134681337459,-79.0624411404133],[35.9134735645747,-79.0624444931746],[35.9134789954035,-79.0624478459358],[35.9134844262324,-79.0624511986970],[35.9134898570612,-79.0624545514583],[35.9134952878900,-79.0624579042196],[35.9135007187188,-79.0624612569809],[35.9135061495477,-79.0624646097422],[35.9135115803765,-79.0624679625034],[35.9135170112053,-79.0624713152646],[35.9135224420341,-79.0624746680259],[35.9135278728629,-79.0624780207872],[35.9135333036917,-79.0624813735485],[35.9135387345205,-79.0624847263097],[35.9135441653493,-79.0624880790710],[35.9135493246256,-79.0624907612800],[35.9135544839020,-79.0624934434890],[35.9135596431783,-79.0624961256980],[35.9135648024547,-79.0624988079070],[35.9135699617310,-79.0625014901160],[35.9135751210074,-79.0625041723250],[35.9135802802837,-79.0625068545340],[35.9135854395600,-79.0625095367431],[35.9135905988363,-79.0625122189521],[35.9135957581126,-79.0625149011611],[35.9136009173889,-79.0625175833702],[35.9136060766653,-79.0625202655792],[35.9136112359417,-79.0625229477882],[35.9136163952180,-79.0625256299973],[35.9136215544943,-79.0625283122063],[35.9136267137706,-79.0625309944153],[35.9136318730470,-79.0625336766243],[35.9136370323233,-79.0625363588333],[35.9136421915996,-79.0625390410423],[35.9136473508759,-79.0625417232513],[35.9136525101522,-79.0625444054603],[35.9136576694285,-79.0625470876693],[35.9136628287049,-79.0625497698784],[35.9136679879812,-79.0625524520874],[35.9136731472576,-79.0625551342964],[35.9136783065339,-79.0625578165054],[35.9136834658102,-79.0625604987144],[35.9136886250865,-79.0625631809234],[35.9136937843628,-79.0625658631324],[35.9136989436391,-79.0625685453414],[35.9137041029154,-79.0625712275504],[35.9137092621918,-79.0625739097595],[35.9137165937765,-79.0625745803117],[35.9137239253612,-79.0625752508640],[35.9137312569459,-79.0625759214163],[35.9137385885305,-79.0625765919685],[35.9137459201152,-79.0625772625207],[35.9137532516999,-79.0625779330730],[35.9137605832846,-79.0625786036253],[35.9137679148693,-79.0625792741776],[35.9137752464540,-79.0625799447298],[35.9137825780386,-79.0625806152821],[35.9137899096233,-79.0625812858343],[35.9137972412080,-79.0625819563866],[35.9138045727927,-79.0625826269388],[35.9138119043774,-79.0625832974911],[35.9138192359621,-79.0625839680434],[35.9138265675467,-79.0625846385956],[35.9138338991313,-79.0625853091478],[35.9138412307160,-79.0625859797001],[35.9138485623007,-79.0625866502523],[35.9138558938854,-79.0625873208046],[35.9138632254701,-79.0625879913568],[35.9138705570548,-79.0625886619091],[35.9138778886394,-79.0625893324614],[35.9138852202241,-79.0625900030136],[35.9138925518088,-79.0625906735659],[35.9138998833935,-79.0625913441181],[35.9139072149782,-79.0625920146703],[35.9139145465629,-79.0625926852226],[35.9139218781475,-79.0625933557749],[35.9139292097322,-79.0625940263271],[35.9139365413169,-79.0625946968794],[35.9139438729016,-79.0625953674316],[35.9139506613866,-79.0625983849168],[35.9139574498715,-79.0626014024019],[35.9139642383565,-79.0626044198870],[35.9139710268414,-79.0626074373722],[35.9139778153263,-79.0626104548573],[35.9139846038113,-79.0626134723424],[35.9139913922962,-79.0626164898275],[35.9139981807811,-79.0626195073127],[35.9140049692660,-79.0626225247979],[35.9140117577510,-79.0626255422830],[35.9140185462360,-79.0626285597681],[35.9140253347209,-79.0626315772533],[35.9140321232058,-79.0626345947385],[35.9140389116908,-79.0626376122236],[35.9140457001757,-79.0626406297087],[35.9140524886607,-79.0626436471939],[35.9140592771457,-79.0626466646790],[35.9140660656306,-79.0626496821641],[35.9140728541155,-79.0626526996492],[35.9140796426005,-79.0626557171344],[35.9140864310855,-79.0626587346196],[35.9140932195704,-79.0626617521047],[35.9141000080553,-79.0626647695898],[35.9141067965403,-79.0626677870750],[35.9141135850252,-79.0626708045602],[35.9141203735102,-79.0626738220453],[35.9141271619952,-79.0626768395304],[35.9141339504801,-79.0626798570156],[35.9141407389650,-79.0626828745008],[35.9141475274500,-79.0626858919859],[35.9141543159350,-79.0626889094710],[35.9141611044199,-79.0626919269561],[35.9141678928862,-79.0626962855458],[35.9141746813525,-79.0627006441354],[35.9141814698188,-79.0627050027251],[35.9141882582851,-79.0627093613147],[35.9141950467514,-79.0627137199044],[35.9142018352177,-79.0627180784940],[35.9142086236840,-79.0627224370837],[35.9142154121503,-79.0627267956733],[35.9142222006166,-79.0627311542629],[35.9142289890829,-79.0627355128526],[35.9142357775492,-79.0627398714422],[35.9142425660155,-79.0627442300319],[35.9142493544818,-79.0627485886215],[35.9142561429481,-79.0627529472112],[35.9142629314144,-79.0627573058008],[35.9142697198808,-79.0627616643905],[35.9142765083472,-79.0627660229802],[35.9142832968135,-79.0627703815698],[35.9142900852798,-79.0627747401595],[35.9142968737461,-79.0627790987491],[35.9143036622124,-79.0627834573388],[35.9143104506787,-79.0627878159284],[35.9143172391450,-79.0627921745181],[35.9143240276113,-79.0627965331077],[35.9143308160776,-79.0628008916973],[35.9143376045439,-79.0628052502870],[35.9143443930102,-79.0628096088766],[35.9143511814765,-79.0628139674663],[35.9143579699428,-79.0628183260559],[35.9143647584091,-79.0628226846456],[35.9143715468754,-79.0628270432352],[35.9143783353417,-79.0628314018249],[35.9143837661014,-79.0628357604145],[35.9143891968610,-79.0628401190042],[35.9143946276206,-79.0628444775939],[35.9144000583802,-79.0628488361835],[35.9144054891399,-79.0628531947732],[35.9144109198995,-79.0628575533628],[35.9144163506591,-79.0628619119525],[35.9144217814187,-79.0628662705421],[35.9144272121784,-79.0628706291318],[35.9144326429380,-79.0628749877214],[35.9144380736976,-79.0628793463110],[35.9144435044572,-79.0628837049007],[35.9144489352169,-79.0628880634903],[35.9144543659765,-79.0628924220800],[35.9144597967361,-79.0628967806696],[35.9144652274957,-79.0629011392593],[35.9144706582553,-79.0629054978489],[35.9144760890149,-79.0629098564386],[35.9144815197745,-79.0629142150283],[35.9144869505342,-79.0629185736179],[35.9144923812938,-79.0629229322076],[35.9144978120534,-79.0629272907972],[35.9145032428130,-79.0629316493869],[35.9145086735727,-79.0629360079765],[35.9145141043323,-79.0629403665662],[35.9145195350919,-79.0629447251558],[35.9145249658515,-79.0629490837455],[35.9145303966112,-79.0629534423351],[35.9145358273708,-79.0629578009247],[35.9145412581304,-79.0629621595144],[35.9145466888900,-79.0629665181040],[35.9145521196497,-79.0629708766937],[35.9145580934715,-79.0629755705594],[35.9145640672933,-79.0629802644252],[35.9145700411151,-79.0629849582910],[35.9145760149369,-79.0629896521568],[35.9145819887587,-79.0629943460226],[35.9145879625805,-79.0629990398884],[35.9145939364023,-79.0630037337542],[35.9145999102241,-79.0630084276199],[35.9146058840459,-79.0630131214857],[35.9146118578677,-79.0630178153515],[35.9146178316895,-79.0630225092172],[35.9146238055113,-79.0630272030830],[35.9146297793331,-79.0630318969488],[35.9146357531549,-79.0630365908145],[35.9146417269767,-79.0630412846803],[35.9146477007986,-79.0630459785461],[35.9146536746205,-79.0630506724119],[35.9146596484423,-79.0630553662777],[35.9146656222641,-79.0630600601434],[35.9146715960859,-79.0630647540092],[35.9146775699077,-79.0630694478750],[35.9146835437295,-79.0630741417407],[35.9146895175513,-79.0630788356065],[35.9146954913731,-79.0630835294723],[35.9147014651949,-79.0630882233380],[35.9147074390167,-79.0630929172038],[35.9147134128385,-79.0630976110696],[35.9147193866603,-79.0631023049354],[35.9147253604821,-79.0631069988012],[35.9147313343039,-79.0631116926670],[35.9147373081257,-79.0631163865328],[35.9147432819475,-79.0631210803985],[35.9147476265342,-79.0631248801946],[35.9147519711209,-79.0631286799907],[35.9147563157076,-79.0631324797868],[35.9147606602943,-79.0631362795829],[35.9147650048810,-79.0631400793791],[35.9147693494677,-79.0631438791752],[35.9147736940544,-79.0631476789713],[35.9147780386411,-79.0631514787674],[35.9147823832278,-79.0631552785635],[35.9147867278145,-79.0631590783596],[35.9147910724012,-79.0631628781557],[35.9147954169879,-79.0631666779518],[35.9147997615746,-79.0631704777479],[35.9148041061613,-79.0631742775440],[35.9148084507480,-79.0631780773401],[35.9148127953347,-79.0631818771362],[35.9148171399214,-79.0631856769323],[35.9148214845081,-79.0631894767284],[35.9148258290948,-79.0631932765245],[35.9148301736815,-79.0631970763206],[35.9148345182682,-79.0632008761167],[35.9148388628549,-79.0632046759128],[35.9148432074416,-79.0632084757089],[35.9148475520283,-79.0632122755050],[35.9148518966150,-79.0632160753011],[35.9148562412017,-79.0632198750972],[35.9148605857884,-79.0632236748933],[35.9148649303751,-79.0632274746894],[35.9148692749619,-79.0632312744855],[35.9148736195486,-79.0632350742816],[35.9148779641353,-79.0632388740777],[35.9148823087220,-79.0632426738738],[35.9148866533087,-79.0632464736699],[35.9148909978954,-79.0632502734660],[35.9148953424821,-79.0632540732621],[35.9148996870688,-79.0632578730582],[35.9149040316555,-79.0632616728543],[35.9149083762422,-79.0632654726504],[35.9149127208289,-79.0632692724465],[35.9149170654156,-79.0632730722427],[35.9149214100023,-79.0632768720388],[35.9149257545890,-79.0632806718349],[35.9149300991757,-79.0632844716310],[35.9149344437624,-79.0632882714271],[35.9149387883491,-79.0632920712232],[35.9149431329358,-79.0632958710193],[35.9149474775225,-79.0632996708154],[35.9149518221092,-79.0633034706115],[35.9149572528295,-79.0633061528205],[35.9149626835497,-79.0633088350295],[35.9149681142700,-79.0633115172385],[35.9149735449902,-79.0633141994475],[35.9149789757104,-79.0633168816565],[35.9149844064307,-79.0633195638655],[35.9149898371509,-79.0633222460746],[35.9149952678712,-79.0633249282836],[35.9150006985914,-79.0633276104926],[35.9150061293117,-79.0633302927017],[35.9150115600319,-79.0633329749107],[35.9150169907522,-79.0633356571197],[35.9150224214725,-79.0633383393287],[35.9150278521928,-79.0633410215378],[35.9150332829131,-79.0633437037468],[35.9150387136333,-79.0633463859558],[35.9150441443536,-79.0633490681648],[35.9150495750739,-79.0633517503738],[35.9150550057942,-79.0633544325828],[35.9150604365144,-79.0633571147918],[35.9150658672347,-79.0633597970008],[35.9150712979549,-79.0633624792098],[35.9150767286752,-79.0633651614189],[35.9150821593954,-79.0633678436279],[35.9150875901156,-79.0633705258369],[35.9150930208359,-79.0633732080460],[35.9150984515561,-79.0633758902550],[35.9151038822764,-79.0633785724640],[35.9151093129966,-79.0633812546730],[35.9151147437169,-79.0633839368820],[35.9151201744371,-79.0633866190910],[35.9151256051574,-79.0633893013000],[35.9151289305000,-79.0633926674769],[35.9151322558427,-79.0633960336538],[35.9151355811854,-79.0633993998306],[35.9151389065280,-79.0634027660075],[35.9151422318707,-79.0634061321844],[35.9151455572134,-79.0634094983612],[35.9151488825561,-79.0634128645381],[35.9151522078987,-79.0634162307149],[35.9151555332413,-79.0634195968918],[35.9151588585840,-79.0634229630687],[35.9151621839267,-79.0634263292455],[35.9151655092694,-79.0634296954224],[35.9151688346120,-79.0634330615993],[35.9151721599547,-79.0634364277762],[35.9151754852974,-79.0634397939531],[35.9151788106400,-79.0634431601299],[35.9151841971924,-79.0634470277216],[35.9151895837449,-79.0634508953133],[35.9151949702973,-79.0634547629049],[35.9152003568498,-79.0634586304966],[35.9152057434023,-79.0634624980883],[35.9152111299547,-79.0634663656799],[35.9152165165071,-79.0634702332715],[35.9152219030595,-79.0634741008632],[35.9152272896119,-79.0634779684549],[35.9152326761644,-79.0634818360465],[35.9152380627169,-79.0634857036382],[35.9152434492693,-79.0634895712299],[35.9152488358217,-79.0634934388216],[35.9152542223742,-79.0634973064132],[35.9152596089266,-79.0635011740048],[35.9152649954791,-79.0635050415965],[35.9152703820316,-79.0635089091882],[35.9152757685840,-79.0635127767798],[35.9152811551365,-79.0635166443714],[35.9152865416889,-79.0635205119631],[35.9152919282413,-79.0635243795548],[35.9152973147937,-79.0635282471465],[35.9153027013461,-79.0635321147381],[35.9153080878986,-79.0635359823298],[35.9153134744511,-79.0635398499215],[35.9153188610035,-79.0635437175131],[35.9153242475559,-79.0635475851048],[35.9153296341083,-79.0635514526965],[35.9153350206607,-79.0635553202881],[35.9153404072132,-79.0635591878798],[35.9153457937657,-79.0635630554715],[35.9153511803181,-79.0635669230631],[35.9153565668705,-79.0635707906548],[35.9153619534230,-79.0635746582465],[35.9153673399754,-79.0635785258382],[35.9153727265279,-79.0635823934298],[35.9153781130804,-79.0635862610214],[35.9153834996328,-79.0635901286131],[35.9153888861853,-79.0635939962048],[35.9153942727377,-79.0635978637964],[35.9154050458426,-79.0636055989797],[35.9154158189475,-79.0636133341630],[35.9154265920524,-79.0636210693463],[35.9154373651572,-79.0636288045296],[35.9154593500478,-79.0636386661566],[35.9154813349383,-79.0636485277836],[35.9155033198289,-79.0636583894106],[35.9155253047194,-79.0636682510376],[35.9155430562691,-79.0636870265007],[35.9155608078187,-79.0637058019638],[35.9155785593683,-79.0637245774269],[35.9155963109180,-79.0637433528900],[35.9156185767015,-79.0637601166963],[35.9156408424851,-79.0637768805026],[35.9156631082687,-79.0637936443090],[35.9156853740523,-79.0638104081153],[35.9156886324576,-79.0638110786676],[35.9156918908628,-79.0638117492199],[35.9156951492680,-79.0638124197721],[35.9156984076733,-79.0638130903244]]
        var bloodcounter = 0
        pollute()

        function pollute() {
            L.polyline([bloodpath[bloodcounter],bloodpath[bloodcounter+1]], {color: 'red', weight: 7}).addTo(hydroLayer);
            bloodcounter = bloodcounter + 1
            if (bloodcounter < bloodpath.length-2) {setTimeout(function(){pollute()},14);
        }
        for (var i = TanyardBranch.length-4; i > 82 ; i = i - 2){
            var thisLat = TanyardBranch[i]
            var thisLong = TanyardBranch[i+1]
            var nextLat = TanyardBranch[i+2]
            var nextLong = TanyardBranch[i+3]
            var NextSegment = [[thisLat,thisLong],[nextLat,nextLong]]
            L.polyline(NextSegment, {color: 'red', weight: 7}).addTo(hydroLayer);
        }
    }

    }
    if (year == 4) {
        markerLayer.clearLayers()
        mymap.panTo([35.91686721605799,-79.06081438064577]);
        mymap.flyTo([35.91686721605799,-79.06081438064577],16);
        document.getElementById('comment').innerText = comment1873
        var WilsonCaldwell = [[35.91783798321747,-79.05870616436006],[35.91706530907388,-79.06085140844351],[35.91863124094573,-79.06175403661146],[35.91940391508932,-79.05960879252801],[35.91783798321747,-79.05870616436006]]
        var WCpopup = "<a href='https://en.wikipedia.org/wiki/Wilson_Caldwell'><img src='Wilson_Swain_Caldwell.jpg' alt='WilsonCaldwellpic' style='width:150px'></a><br><a href='https://rod.orangecountync.gov/orangencnw/application.asp?cmd=image_link&image_link_book=41&image_link_page=244&image_link_booktype=Records%20Book&tif2pdf=true'>Deed Book 41, page 244:<br>John W Norwood to<br>Wilson Caldwell, 6 Jan 1873</a>"
        var Caldwell = L.polygon(WilsonCaldwell, {color: 'green', fillColor: 'green', fillOpacity: 1.0}).addTo(markerLayer)
        .bindPopup(WCpopup).openPopup();
    }

    if (year == 5) {
        mymap.panTo([35.911636294276306,-79.05476331710817]);
        L.imageOverlay("./map1880.png", [[35.898060479430455,-79.07148545663641],[35.92501887943045,-79.03066145663641]], {opacity: 1}).addTo(baseMap);
        markerLayer.clearLayers()
        hydroLayer.clearLayers()
        document.getElementById('comment').innerText = comment1880
        for (var i = 0; i < map1880.features.length; i = i + 1){
            var nextCoord = map1880.features[i].coords.split(',');
            if (map1880.features[i].race == "white"){var circlecolor = "yellow"}
            if (map1880.features[i].race == "poc"){var circlecolor = "green"}
            if (map1880.features[i].race == "institution"){var circlecolor = "#56a0d3"}
            var marker = L.circle(nextCoord, {color: circlecolor, fillColor: circlecolor, fillOpacity: 1.0, radius: 8}).addTo(markerLayer)
                .bindTooltip(map1880.features[i].description);
        }
        //adding legend
        console.log("adding legend")
        L.imageOverlay("./legend.png", [[35.9087078899065,-79.0531325340271],[35.9106726899065,-79.0501484340271]]).addTo(markerLayer);
        setTimeout(function(){
            var marker = L.circle(map1880.features[12].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
            var marker = L.circle(map1880.features[13].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
            var marker = L.circle(map1880.features[39].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
            var marker = L.circle(map1880.features[58].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
            var marker = L.circle(map1880.features[69].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
            var marker = L.circle(map1880.features[75].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
        }, 13000);
        setTimeout(function(){
            tempLayer.clearLayers();
        }, 13250);
        setTimeout(function(){
            var marker = L.circle(map1880.features[12].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
            var marker = L.circle(map1880.features[13].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
            var marker = L.circle(map1880.features[39].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
            var marker = L.circle(map1880.features[58].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
            var marker = L.circle(map1880.features[69].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
            var marker = L.circle(map1880.features[75].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
        }, 13500);
        setTimeout(function(){
            tempLayer.clearLayers();
        }, 13750);
        setTimeout(function(){
            var marker = L.circle(map1880.features[12].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
            var marker = L.circle(map1880.features[13].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
            var marker = L.circle(map1880.features[39].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
            var marker = L.circle(map1880.features[58].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
            var marker = L.circle(map1880.features[69].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
            var marker = L.circle(map1880.features[75].coords.split(','), {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(tempLayer)
        }, 14000);
        setTimeout(function(){
            tempLayer.clearLayers();
        }, 14250);
    }

    if (year == 6) {
        document.getElementById('comment').innerText = comment1882
        L.imageOverlay("./census68to73.png", [[35.90923120399365,-79.04854676833787],[35.91395510399365,-79.04590836833788]], {opacity: 1}).addTo(markerLayer);
        setTimeout(function(){
            var marker = L.circle(map1880.features[25].coords.split(','), {color: "yellow", fillColor: "yellow", fillOpacity: 1.0, radius: 8}).addTo(tempLayer)
            .bindPopup(map1880.features[25].description + " " + map1880.features[25].CensusHousehold, {autoClose:false}).openPopup();
            var line = L.polyline([[35.91371414992204,-79.05487060546876],[35.913436091900735,-79.04856204986574]], {color:'yellow', weight: 3}).addTo(tempLayer);}, 6500);
        setTimeout(function(){
            var marker = L.circle(map1880.features[43].coords.split(','), {color: "yellow", fillColor: "yellow", fillOpacity: 1.0, radius: 8}).addTo(tempLayer)
            .bindPopup(map1880.features[43].description + " " + map1880.features[43].CensusHousehold, {autoClose:false}).openPopup();
            var line = L.polyline([[35.91185461831872,-79.05963420867921],[35.913036381782945,-79.04864788055421]], {color:'yellow', weight: 3}).addTo(tempLayer);}, 7500);
        setTimeout(function(){
            var marker = L.circle(map1880.features[19].coords.split(','), {color: "yellow", fillColor: "yellow", fillOpacity: 1.0, radius: 8}).addTo(tempLayer)
            .bindPopup(map1880.features[19].description + " " + map1880.features[19].CensusHousehold, {autoClose:false}).openPopup();
            var line = L.polyline([[35.91350560649771,-79.05339002609254],[35.91176772324963,-79.04860496520998]], {color:'yellow', weight: 3}).addTo(tempLayer);}, 8750);
        setTimeout(function(){
            var marker = L.circle(map1880.features[15].coords.split(','), {color: "yellow", fillColor: "yellow", fillOpacity: 1.0, radius: 8}).addTo(tempLayer)
            .bindPopup(map1880.features[15].description + " " + map1880.features[15].CensusHousehold, {autoClose:false}).openPopup();
            var line = L.polyline([[35.91449618286729,-79.05068635940553],[35.91046428576104,-79.0486264228821]], {color:'yellow', weight: 3}).addTo(tempLayer);}, 9750);
        setTimeout(function(){
            var marker = L.circle(map1880.features[22].coords.split(','), {color: "yellow", fillColor: "yellow", fillOpacity: 1.0, radius: 8}).addTo(tempLayer)
            .bindPopup(map1880.features[22].description + " " + map1880.features[22].CensusHousehold, {autoClose:false}).openPopup();
            var line = L.polyline([[35.91410611774826,-79.05365020036699],[35.909656143734196,-79.04863715171815]], {color:'yellow', weight: 3}).addTo(tempLayer);}, 11250);
        setTimeout(function(){
            mymap.panTo([35.910907456916455,-79.04731750488283])
            mymap.flyTo([35.910907456916455,-79.04731750488283], 18)
            var line = L.polygon([[35.91125,-79.04851913452148],[35.9106,-79.04851913452148],[35.9106,-79.04595494270326],[35.91125,-79.04595494270326]], {color:'yellow', opacity: 0.2}).addTo(markerLayer)}, 13500);
        setTimeout(function(){
            mymap.panTo([35.91199745188111,-79.0508794784546], 17)
            mymap.flyTo([35.91199745188111,-79.0508794784546], 17)
        }, 16000)


        orbitcounter = 0
        setTimeout(function(){orbit()}, 16500)
        function orbit(){
            tempLayer.clearLayers();
            var line = L.polyline([[35.91111111929879,-79.04858350753786], orbitalpath[orbitcounter]], {color:'green', weight: 3}).addTo(tempLayer);
            var circle = L.circle(orbitalpath[orbitcounter], {color: "green", fillColor: "green", fillOpacity: 0.5, radius: 8}).addTo(tempLayer);
            orbitcounter = orbitcounter + 1
            if (orbitcounter < 170) {
                setTimeout(function(){orbit()}, 20)
            }
        }
    }

    if (year == 7) {
        tempLayer.clearLayers();
        mymap.panTo([35.911636294276306,-79.05476331710817]);
        mymap.flyTo([35.911636294276306,-79.05476331710817],16);
        document.getElementById('comment').innerText = comment1883
        markerLayer.clearLayers();
        for (var i = 0; i < map1880.features.length; i = i + 1){
        if (map1880.features[i].race == "poc"){
            var nextCoord = map1880.features[i].coords.split(',');
            var marker = L.circle(nextCoord, {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(markerLayer)
            .bindPopup(map1880.features[i].description);
        }
        setTimeout(function(){
            mymap.panTo([35.915294364423985,-79.05035912990571],17);
            var box = L.polyline([[35.91587,-79.051],[35.91479,-79.051],[35.91479,-79.0496],[35.91587,-79.0496],[35.91587,-79.051]], {color: 'green'}).addTo(markerLayer);
        }, 9000);
        
        //Begin Flashback to 1850 map
        setTimeout(function(){
        markerLayer.clearLayers();
        L.imageOverlay(imageUrl1850, imageBounds1850, {opacity: 1}).addTo(markerLayer);
        var box = L.polyline([[35.91587,-79.051],[35.91479,-79.051],[35.91479,-79.0496],[35.91587,-79.0496],[35.91587,-79.051]], {color: 'green'}).addTo(markerLayer);
        for (i=0; i < chorus.features.length-1; i = i + 1) {
            coords = chorus.features[i].coords.split(",")
            toolTip = chorus.features[i].person
            if (chorus.features[i].status == "FPOC") {
                var green = L.circle(coords, {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 8}).addTo(markerLayer)
                .bindTooltip(toolTip);
            }
        }}, 11000);
        //End Flashback
        
        setTimeout(function(){
            markerLayer.clearLayers();
            var box = L.polyline([[35.91587,-79.051],[35.91479,-79.051],[35.91479,-79.0496],[35.91587,-79.0496],[35.91587,-79.051]], {color: 'green'}).addTo(colorline);
            for (var i = 0; i < map1880.features.length; i = i + 1){
                if (map1880.features[i].race == "poc"){
                    var nextCoord = map1880.features[i].coords.split(',');
                    var marker = L.circle(nextCoord, {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 16}).addTo(markerLayer)
                    .bindPopup(map1880.features[i].description);
                }
            }
            mymap.panTo([35.911636294276306,-79.05476331710817]);
            mymap.flyTo([35.911636294276306,-79.05476331710817],16);
            },13500);
            setTimeout(function(){var line = L.polyline(colorLine, {color:'green', weight: 5}).addTo(colorline)},19000);
            setTimeout(function(){colorline.clearLayers();},23500);
        }
    }

    if (year == 8) {
        markerLayer.clearLayers();
        mymap.panTo([35.91512940665736,-79.05959129333498]);
        mymap.flyTo([35.91512940665736,-79.05959129333498],16);
        document.getElementById('comment').innerText = comment1885
        for (var i = 0; i < map1880.features.length; i = i + 1){
            var nextCoord = map1880.features[i].coords.split(',');
            if (map1880.features[i].race == "white"){var circlecolor = "yellow"}
            if (map1880.features[i].race == "poc"){var circlecolor = "green"}
            if (map1880.features[i].race == "institution"){var circlecolor = "#56a0d3"}
            var marker = L.circle(nextCoord, {color: circlecolor, fillColor: circlecolor, fillOpacity: 1.0, radius: 8}).addTo(markerLayer)
                .bindTooltip(map1880.features[i].description);
        }
        var WilsonCaldwell = [[35.91783798321747,-79.05870616436006],[35.91706530907388,-79.06085140844351],[35.91863124094573,-79.06175403661146],[35.91940391508932,-79.05960879252801],[35.91783798321747,-79.05870616436006]]
        var WCpopup = "<a href='https://rod.orangecountync.gov/orangencnw/application.asp?cmd=image_link&image_link_book=41&image_link_page=244&image_link_booktype=Records%20Book&tif2pdf=true'>Orange County Deed Book 41, page 244: John W Norwood to Wilson Caldwell, 1873</a>"
        var Caldwell = L.polygon(WilsonCaldwell, {color: 'green', fillColor: 'green', fillOpacity: 0.5}).addTo(markerLayer)
        .bindPopup(WCpopup);
        setTimeout(function(){var youngEvans = L.icon({iconUrl: './YoungEvans.png', iconAnchor:   [10, 5]});
            var marker = L.circle([35.91691554833627,-79.06049251556398], {color: "green", fillColor: "green", fillOpacity: 1.0, radius: 8}).addTo(tempLayer)
            .bindPopup("Young Evans", {autoClose:false}).openPopup();
        }, 21000);
    }
    if (year == 9) {
        mymap.panTo([35.91512940665736,-79.05959129333498]);
        mymap.flyTo([35.91512940665736,-79.05959129333498],17);
        document.getElementById('comment').innerText = comment1886
        setTimeout(function(){
            var saundersPopup = "<a href='https://en.wikipedia.org/wiki/William_L._Saunders'><img src='William_L_Saunders.jpg' alt='WilliamSaunderPic' style='width:150px'></a>"
            var nextCoord = map1880.features[53].coords.split(',');
            var marker = L.circle(nextCoord, {color: "yellow", fillColor: "yellow", fillOpacity: 1.0, radius: 8}).addTo(tempLayer)
            .bindPopup(saundersPopup, {autoClose:false}).openPopup();
        }, 2000);
            setTimeout(function(){
            tempLayer.clearLayers();
            var youngEvans = L.icon({iconUrl: './YoungEvans.png', iconAnchor:   [10, 5]});
            var marker = L.circle([35.91691554833627,-79.06049251556398], {color: "green", fillColor: "green", fillOpacity: 1.0, radius: 8}).addTo(tempLayer)
            .bindPopup("Young Evans", {autoClose:false}).openPopup();
            var saundersPopup = "<a href='https://en.wikipedia.org/wiki/Carolina_Hall_%28Chapel_Hill,_North_Carolina%29'><img src='Carolina_Hall_at_UNC.jpg' alt='CarolinaHallPic' style='width:150px'></a>"
            var nextCoord = map1880.features[53].coords.split(',');
            var marker = L.circle(nextCoord, {color: "yellow", fillColor: "yellow", fillOpacity: 1.0, radius: 8}).addTo(tempLayer)
            .bindPopup(saundersPopup, {autoClose:false}).openPopup();
        },7000);
        setTimeout(function(){
            tempLayer.clearLayers();
            var youngEvans = L.icon({iconUrl: './YoungEvans.png', iconAnchor:   [10, 5]});
            var marker = L.circle([35.91691554833627,-79.06049251556398], {color: "green", fillColor: "green", fillOpacity: 1.0, radius: 8}).addTo(markerLayer)
            .bindTooltip("Young Evans");
            var saundersPopup = "<a href='https://en.wikipedia.org/wiki/William_L._Saunders'><img src='William_L_Saunders.jpg' alt='WilliamSaunderPic' style='width:150px'></a>"
            var nextCoord = map1880.features[53].coords.split(',');
            var marker = L.circle(nextCoord, {color: "yellow", fillColor: "yellow", fillOpacity: 1.0, radius: 8}).addTo(markerLayer)
            .bindTooltip(saundersPopup);
        },10000);

        setTimeout(function(){
            var maxLat = 35.917158838457155 
            var minLong = -79.06106114387514
            var minLat = 35.91437833534177
            var maxLong = -79.0573811531067
            var LatRange = maxLat - minLat
            var LongRange = maxLong - minLong

            var JohnEvans = L.icon({iconUrl: './JohnEvans.png', iconAnchor:   [10, 5]});
            var EvanscurrentLat = (Math.random() * LatRange) + minLat
            var EvanscurrentLong = (Math.random() * LongRange) + minLong
            var Evanshypoteneuse = 0 
            var Evanscounter = 1
            var Evansincrement
            var EvansdeltaLat 
            var EvansdeltaLong
            var Evansincrement
            var EvansdeltaLat 
            var EvansdeltaLong
            var RandomEvansLat
            var RandomEvansLong

            var WilliamCreel = L.icon({iconUrl: './WilliamCreel.png', iconAnchor:   [10, 5]});    
            var CreelcurrentLat = (Math.random() * LatRange) + minLat
            var CreelcurrentLong = (Math.random() * LongRange) + minLong
            var Creelhypoteneuse = 0
            var Creelcounter = 1
            var Creelincrement
            var CreeldeltaLat
            var CreeldeltaLong
            var Creelincrement
            var CreeldeltaLat 
            var CreeldeltaLong
            var RandomCreelLat
            var RandomCreelLong

            var AlizeFaucett = L.icon({iconUrl: './AlizeFaucett.png', iconAnchor:   [10, 5]});    
            var FaucettcurrentLat = (Math.random() * LatRange) + minLat
            var FaucettcurrentLong = (Math.random() * LongRange) + minLong
            var Faucetthypoteneuse = 0
            var Faucettcounter = 1
            var Faucettincrement
            var FaucettdeltaLat
            var FaucettdeltaLong
            var Faucettincrement
            var FaucettdeltaLat 
            var FaucettdeltaLong
            var RandomFaucettLat
            var RandomFaucettLong

            var JamesMorgan = L.icon({iconUrl: './JamesMorgan.png', iconAnchor:   [10, 5]});    
            var MorgancurrentLat = (Math.random() * LatRange) + minLat
            var MorgancurrentLong = (Math.random() * LongRange) + minLong
            var Morganhypoteneuse = 0
            var Morgancounter = 1
            var Morganincrement
            var MorgandeltaLat
            var MorgandeltaLong
            var Morganincrement
            var MorgandeltaLat 
            var MorgandeltaLong
            var RandomMorganLat
            var RandomMorganLong

            var JohnNevill = L.icon({iconUrl: './JohnNevill.png', iconAnchor:   [10, 5]});    
            var NevillcurrentLat = (Math.random() * LatRange) + minLat
            var NevillcurrentLong = (Math.random() * LongRange) + minLong
            var Nevillhypoteneuse = 0
            var Nevillcounter = 1
            var Nevillincrement
            var NevilldeltaLat
            var NevilldeltaLong
            var Nevillincrement
            var NevilldeltaLat 
            var NevilldeltaLong
            var RandomNevillLat
            var RandomNevillLong

            Rando()

            function Rando(){
                tempLayer.clearLayers();
                Evanscounter = Evanscounter + 1
                if (Evanscounter > Evanshypoteneuse) {
                    RandomEvansLat = (Math.random() * LatRange) + minLat
                    RandomEvansLong = (Math.random() * LongRange) + minLong
                    Evanshypoteneuse = mymap.distance([EvanscurrentLat, EvanscurrentLong], [RandomEvansLat, RandomEvansLong])
                    Evansincrement = 1/Evanshypoteneuse
                    EvansdeltaLat = RandomEvansLat - EvanscurrentLat 
                    EvansdeltaLong = RandomEvansLong - EvanscurrentLong
                    Evanscounter = 0
                }
                EvanscurrentLat = EvanscurrentLat + (EvansdeltaLat * Evansincrement)
                EvanscurrentLong = EvanscurrentLong + (EvansdeltaLong * Evansincrement)
                var markerA = L.circle([EvanscurrentLat, EvanscurrentLong], {color: "green", fillColor: "green", fillOpacity: 1.0, radius: 8}).addTo(tempLayer)
                .bindTooltip("John Evans");
                if (mymap.distance([EvanscurrentLat,EvanscurrentLong],[RandomEvansLat,RandomEvansLong]) < 2){Evanscounter = 10000}

                Creelcounter = Creelcounter + 1
                if (Creelcounter > Creelhypoteneuse) {
                    RandomCreelLat = (Math.random() * LatRange) + minLat
                    RandomCreelLong = (Math.random() * LongRange) + minLong
                    Creelhypoteneuse = mymap.distance([CreelcurrentLat, CreelcurrentLong], [RandomCreelLat, RandomCreelLong])
                    Creelincrement = 1/Creelhypoteneuse
                    CreeldeltaLat = RandomCreelLat - CreelcurrentLat 
                    CreeldeltaLong = RandomCreelLong - CreelcurrentLong
                    Creelcounter = 0
                }
                CreelcurrentLat = CreelcurrentLat + (CreeldeltaLat * Creelincrement)
                CreelcurrentLong = CreelcurrentLong + (CreeldeltaLong * Creelincrement)
                var markerB = L.circle([CreelcurrentLat, CreelcurrentLong], {color: "green", fillColor: "green", fillOpacity: 1.0, radius: 8}).addTo(tempLayer)
                .bindTooltip("William Creel");
                if (mymap.distance([CreelcurrentLat,CreelcurrentLong],[RandomCreelLat,RandomCreelLong]) < 2){Creelcounter = 10000}

                Faucettcounter = Faucettcounter + 1
                if (Faucettcounter > Faucetthypoteneuse) {
                    RandomFaucettLat = (Math.random() * LatRange) + minLat
                    RandomFaucettLong = (Math.random() * LongRange) + minLong
                    Faucetthypoteneuse = mymap.distance([FaucettcurrentLat, FaucettcurrentLong], [RandomFaucettLat, RandomFaucettLong])
                    Faucettincrement = 1/Faucetthypoteneuse
                    FaucettdeltaLat = RandomFaucettLat - FaucettcurrentLat 
                    FaucettdeltaLong = RandomFaucettLong - FaucettcurrentLong
                    Faucettcounter = 0
                }
                FaucettcurrentLat = FaucettcurrentLat + (FaucettdeltaLat * Faucettincrement)
                FaucettcurrentLong = FaucettcurrentLong + (FaucettdeltaLong * Faucettincrement)
                var markerC = L.circle([FaucettcurrentLat, FaucettcurrentLong], {color: "green", fillColor: "green", fillOpacity: 1.0, radius: 8}).addTo(tempLayer)
                .bindTooltip("Alize Faucett");
                if (mymap.distance([FaucettcurrentLat,FaucettcurrentLong],[RandomFaucettLat,RandomFaucettLong]) < 2){Faucettcounter = 10000}

                Morgancounter = Morgancounter + 1
                if (Morgancounter > Morganhypoteneuse) {
                    RandomMorganLat = (Math.random() * LatRange) + minLat
                    RandomMorganLong = (Math.random() * LongRange) + minLong
                    Morganhypoteneuse = mymap.distance([MorgancurrentLat, MorgancurrentLong], [RandomMorganLat, RandomMorganLong])
                    Morganincrement = 1/Morganhypoteneuse
                    MorgandeltaLat = RandomMorganLat - MorgancurrentLat 
                    MorgandeltaLong = RandomMorganLong - MorgancurrentLong
                    Morgancounter = 0
                }
                MorgancurrentLat = MorgancurrentLat + (MorgandeltaLat * Morganincrement)
                MorgancurrentLong = MorgancurrentLong + (MorgandeltaLong * Morganincrement)
                var markerD = L.circle([MorgancurrentLat, MorgancurrentLong], {color: "green", fillColor: "green", fillOpacity: 1.0, radius: 8}).addTo(tempLayer)
                .bindTooltip("James Morgan");
                if (mymap.distance([MorgancurrentLat,MorgancurrentLong],[RandomMorganLat,RandomMorganLong]) < 2){Morgancounter = 10000}

                Nevillcounter = Nevillcounter + 1
                if (Nevillcounter > Nevillhypoteneuse) {
                    RandomNevillLat = (Math.random() * LatRange) + minLat
                    RandomNevillLong = (Math.random() * LongRange) + minLong
                    Nevillhypoteneuse = mymap.distance([NevillcurrentLat, NevillcurrentLong], [RandomNevillLat, RandomNevillLong])
                    Nevillincrement = 1/Nevillhypoteneuse
                    NevilldeltaLat = RandomNevillLat - NevillcurrentLat 
                    NevilldeltaLong = RandomNevillLong - NevillcurrentLong
                    Nevillcounter = 0
                }
                NevillcurrentLat = NevillcurrentLat + (NevilldeltaLat * Nevillincrement)
                NevillcurrentLong = NevillcurrentLong + (NevilldeltaLong * Nevillincrement)
                var markerE = L.circle([NevillcurrentLat, NevillcurrentLong], {color: "green", fillColor: "green", fillOpacity: 1.0, radius: 8}).addTo(tempLayer)
                .bindTooltip("John Nevill");
                if (mymap.distance([NevillcurrentLat,NevillcurrentLong],[RandomNevillLat,RandomNevillLong]) < 2){Nevillcounter = 10000}
            loopcounter = loopcounter + 1
            if (loopcounter < 250) {setTimeout(Rando, 30)}
        }
        },16500);
    }

    if (year == 10) {
        tempLayer.clearLayers();
        mymap.panTo([35.9145037859274,-79.06255245208742]);
        mymap.flyTo([35.9145037859274,-79.06255245208742],16);
        document.getElementById('comment').innerText = comment1900
        markerLayer.clearLayers()
        baseMap.clearLayers();
        drawparcels(1900)
        setTimeout(function(){
            document.getElementById('comment').innerText = ""
            document.getElementById('yearheader').innerText = comment1920
            drawparcels(1920)
        },18000);
        setTimeout(function(){
            document.getElementById('yearheader').innerText = comment1940
            drawparcels(1940)
        },20000);
        setTimeout(function(){
            document.getElementById('yearheader').innerText = comment1960
            drawparcels(1960)
            document.getElementById('slider').style.display = ""
            document.getElementById('year').style.display = "none"
            Explore();
        },22000);
        
    }
}

function hydrology() {
    hydroLayer.clearLayers();
    for (var i = 0; i < TanyardBranch.length-2; i = i + 2){
            var thisLat = TanyardBranch[i]
            var thisLong = TanyardBranch[i+1]
            var nextLat = TanyardBranch[i+2]
            var nextLong = TanyardBranch[i+3]
            var NextSegment = [[thisLat,thisLong],[nextLat,nextLong]]
            L.polyline(NextSegment, {color: 'blue', weight: 5}).addTo(hydroLayer)
            .bindTooltip("Tanyard Branch");
        }
    for (var i = 0; i < BolinCreek.length-2; i = i + 2){
            var thisLat = BolinCreek[i]
            var thisLong = BolinCreek[i+1]
            var nextLat = BolinCreek[i+2]
            var nextLong = BolinCreek[i+3]
            var NextSegment = [[thisLat,thisLong],[nextLat,nextLong]]
            L.polyline(NextSegment, {color: 'blue', weight: 5}).addTo(hydroLayer)
            .bindTooltip("Bolin Creek");
        }
}


function slide0(){
    document.getElementById("button1").style.display = "none";
    document.getElementById("button2").style.display = "none";
    
    document.getElementById("year").value = 0
    document.getElementById("year").value = 0
    yearChange()
    x = document.getElementById("slide0");
    x.play()
    x.addEventListener("ended", slide1);
}


function slide1(){
    document.getElementById("year").value = 1
    yearChange()
    x = document.getElementById("slide1");
    x.play()
    var WCcoords = chorus.features[107].coords.split(",")
    var WCpopup = chorus.features[107].person
    setTimeout(function(){
        mymap.flyTo(WCcoords, 17);
        var red = L.circle(WCcoords, {color: 'red', fillColor: 'red', fillOpacity: 1.0, radius: 8}).addTo(markerLayer)
        .bindPopup(WCpopup).openPopup();},10000);
    var YEcoords = chorus.features[9].coords.split(",")
    var YEpopup = chorus.features[9].person
    setTimeout(function(){
        mymap.flyTo(YEcoords, 17);
        var red = L.circle(YEcoords, {color: 'green', fillColor: 'green', fillOpacity: 1.0, radius: 8}).addTo(markerLayer)
        .bindPopup(YEpopup).openPopup();},14000);
    x.addEventListener("ended", slide2);
}

function slide2(){
    console.log("firing slide2")
    document.getElementById("year").value = 2
    yearChange()
    x = document.getElementById("slide2");
    x.play()
    x.addEventListener("ended", slide3);
}

function slide3(){
    console.log("firing slide3")
    document.getElementById("year").value = 3
    yearChange()
    x = document.getElementById("slide3");
    x.play()
    x.addEventListener("ended", slide4);
}

function slide4(){
    console.log("firing slide4")
    document.getElementById("year").value = 4
    yearChange()
    x = document.getElementById("slide4");
    x.play()
    x.addEventListener("ended", slide5);
}

function slide5(){
    console.log("firing slide5")
    document.getElementById("year").value = 5
    yearChange()
    x = document.getElementById("slide5");
    x.play()
    x.addEventListener("ended", slide6);
}

function slide6(){
    console.log("firing slide6")
    document.getElementById("year").value = 6
    yearChange()
    x = document.getElementById("slide6");
    x.play()
    x.addEventListener("ended", slide7);
}

function slide7(){
    console.log("firing slide7")
    document.getElementById("year").value = 7
    yearChange()
    x = document.getElementById("slide7");
    x.play()
    x.addEventListener("ended", slide8);
}

function slide8(){
    console.log("firing slide8")
    document.getElementById("year").value = 8
    yearChange()
    x = document.getElementById("slide8");
    x.play()
    x.addEventListener("ended", slide9);
}

function slide9(){
    console.log("firing slide8")
    document.getElementById("year").value = 9
    yearChange()
    x = document.getElementById("slide9");
    x.play()
    x.addEventListener("ended", slide10);
}

function slide10(){
    console.log("firing slide8")
    document.getElementById("year").value = 10
    yearChange()
    x = document.getElementById("slide10");
    x.play()
}

function drawparcels(a) {
    tempLayer.clearLayers();
    baseMap.clearLayers();
    var AfAmOwned = 0
    var sliderYear = a
    var length = northside.features.length
    var boundary = []
    var nextcorner = []    
    for (var i=0; i < length; i++){
        var parcelBegin = northside.features[i].firstyearshown	
        var parcelEnd = northside.features[i].lastyearshown
        var AfamBegin = northside.features[i].firstownedbyAFAM
        var AfamEnd = northside.features[i].lastownedbyAFAM
        var boundary = []
        var parcel = northside.features[i].coords
        var coords = parcel.split(",");
        for (var j = 0; j < coords.length; j = j + 2){
            nextcorner.push(coords[j])
            nextcorner.push(coords[j+1])
            boundary.push(nextcorner)
            nextcorner = []
        } 
        if (sliderYear >= parcelBegin && sliderYear <= parcelEnd) {
            if (sliderYear >= AfamBegin && sliderYear <= AfamEnd) {
                var nextTract = L.polygon(boundary, {color: 'green', fillColor: 'green', fillOpacity: 0.5}).addTo(baseMap)
                .bindTooltip("parcel " + northside.features[i].PIN);
                AfAmOwned = AfAmOwned + 1;
            }
        }
    }
}

function drawparcel() {
    tempLayer.clearLayers();
    baseMap.clearLayers();
    var AfAmOwned = 0
    var sliderSetting = document.getElementById('sliderval');
    var sliderYear = sliderSetting.value;
    document.getElementById("yearheader").innerText = sliderYear
    document.getElementById("comment").innerText = "Almost every parcel in Northside was owned by people of color in 1960, but things changed dramatically in the decades that followed - especially in the early 2000's. Green parcels were owned by people of color."
    var length = northside.features.length
    var boundary = []
    var nextcorner = []    
    for (var i=0; i < length; i++){
        var parcelBegin = northside.features[i].firstyearshown	
        var parcelEnd = northside.features[i].lastyearshown
        var AfamBegin = northside.features[i].firstownedbyAFAM
        var AfamEnd = northside.features[i].lastownedbyAFAM
        var boundary = []
        var parcel = northside.features[i].coords
        var coords = parcel.split(",");
        for (var j = 0; j < coords.length; j = j + 2){
            nextcorner.push(coords[j])
            nextcorner.push(coords[j+1])
            boundary.push(nextcorner)
            nextcorner = []
        } 
        if (sliderYear >= parcelBegin && sliderYear <= parcelEnd) {
            if (sliderYear >= AfamBegin && sliderYear <= AfamEnd) {
                var nextTract = L.polygon(boundary, {color: 'green', fillColor: 'green', fillOpacity: 0.5}).addTo(baseMap)
                .bindTooltip("parcel " + northside.features[i].PIN);
                AfAmOwned = AfAmOwned + 1;
            }
        }
    }
}

function Explore(){
    document.getElementById("button1").style.display = "none";
    document.getElementById("button2").style.display = "none";
    document.getElementById("button3").style.display = "";
    document.getElementById("button4").style.display = "";
    document.getElementById("button5").style.display = "";
    document.getElementById("button6").style.display = "";
}

function Mapof1850(){
    baseMap.clearLayers();
    markerLayer.clearLayers()
    Map1850();
    mymap.panTo([35.912780,-79.050630]);
    mymap.flyTo([35.912780,-79.050630], 16);
    document.getElementById('comment').innerText = comment1850
}

function Mapof1880(){
    mymap.panTo([35.911636294276306,-79.05476331710817]);
    mymap.flyTo([35.911636294276306,-79.05476331710817], 16);
    baseMap.clearLayers();
    L.imageOverlay("./map1880.png", [[35.898060479430455,-79.07148545663641],[35.92501887943045,-79.03066145663641]], {opacity: 1}).addTo(baseMap);
    markerLayer.clearLayers()
    hydroLayer.clearLayers()
    document.getElementById('comment').innerText = comment1880
    for (var i = 0; i < map1880.features.length; i = i + 1){
        var nextCoord = map1880.features[i].coords.split(',');
        if (map1880.features[i].race == "white"){var circlecolor = "yellow"}
        if (map1880.features[i].race == "poc"){var circlecolor = "green"}
        if (map1880.features[i].race == "institution"){var circlecolor = "#56a0d3"}
        var marker = L.circle(nextCoord, {color: circlecolor, fillColor: circlecolor, fillOpacity: 1.0, radius: 8}).addTo(markerLayer)
            .bindTooltip(map1880.features[i].description);
    }
    //adding legend
    console.log("adding legend")
    L.imageOverlay("./legend.png", [[35.9087078899065,-79.0531325340271],[35.9106726899065,-79.0501484340271]]).addTo(markerLayer);
}

function Mapof1960(){
    baseMap.clearLayers();
    markerLayer.clearLayers()
    mymap.panTo([35.91396776839783,-79.06334638595582]);
    mymap.flyTo([35.91396776839783,-79.06334638595582], 16);
    document.getElementById("slider").style.display = "";
    document.getElementById("year").style.display = "none";
    document.getElementById('yearheader').innerText = "1960"
    document.getElementById('comment').innerText = "Almost every parcel in Northside was owned by people of color in 1960, but things changed dramatically in the decades that followed - especially in the early 2000's. Green parcels were owned by people of color."
    drawparcels(1960)
}

</script>
</html>
